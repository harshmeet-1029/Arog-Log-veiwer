name: Build All Platforms

on:
  workflow_dispatch:  # MANUAL TRIGGER ONLY - You click a button, no auto-runs
    inputs:
      version:
        description: 'Version number (e.g., 1.0.0)'
        required: true
        default: '1.0.0'
      create_release:
        description: 'Create GitHub Release?'
        required: true
        type: boolean
        default: true

permissions:
  contents: write  # Required to create releases and upload assets

jobs:
  build-windows:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Update version in pyproject.toml and installer script
      shell: bash
      run: |
        echo "üìù Updating version to ${{ github.event.inputs.version }}"
        sed -i 's/^version = ".*"/version = "${{ github.event.inputs.version }}"/' pyproject.toml
        sed -i 's/#define MyAppVersion ".*"/#define MyAppVersion "${{ github.event.inputs.version }}"/' installer_windows.iss
        echo "‚úÖ Version updated in pyproject.toml and installer_windows.iss"
        grep "^version" pyproject.toml
        grep "MyAppVersion" installer_windows.iss
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller
    
    - name: Build Windows executable
      run: |
        pyinstaller --name="ArgoLogViewer" `
          --onefile `
          --windowed `
          --add-data="app;app" `
          --hidden-import=PySide6 `
          --hidden-import=paramiko `
          --hidden-import=cryptography `
          --icon=app/icon.ico `
          --clean `
          app/main.py
    
    - name: Create portable version
      run: |
        Copy-Item "dist\ArgoLogViewer.exe" "ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe"
        echo "‚úÖ Portable version created"
    
    - name: Install Inno Setup
      run: |
        choco install innosetup -y
        echo "‚úÖ Inno Setup installed"
    
    - name: Build Windows Installer
      run: |
        & "C:\Program Files (x86)\Inno Setup 6\ISCC.exe" installer_windows.iss
        echo "‚úÖ Windows installer created"
    
    - name: Rename installer with version
      run: |
        $installerPath = Get-ChildItem -Path "installers\windows\ArgoLogViewer-*-Windows-Setup.exe" | Select-Object -First 1
        if ($installerPath) {
          Copy-Item $installerPath.FullName "ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe"
          echo "‚úÖ Installer renamed"
        }
    
    - name: Generate checksums
      run: |
        $portable = Get-FileHash -Algorithm SHA256 "ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe"
        $installer = Get-FileHash -Algorithm SHA256 "ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe"
        "$($portable.Hash)  ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe" | Out-File -Encoding ASCII checksums-windows.txt
        "$($installer.Hash)  ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe" | Add-Content -Encoding ASCII checksums-windows.txt
        echo "‚úÖ Checksums generated"
    
    - name: Upload Windows artifacts
      uses: actions/upload-artifact@v4
      with:
        name: ArgoLogViewer-Windows
        path: |
          ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe
          ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe
          checksums-windows.txt

  build-macos-arm:
    # Build Apple Silicon (arm64) binary
    runs-on: macos-latest  # Apple Silicon runner
    steps:
    - uses: actions/checkout@v4
    
    - name: Update version in pyproject.toml
      run: |
        echo "üìù Updating version to ${{ github.event.inputs.version }}"
        sed -i '' 's/^version = ".*"/version = "${{ github.event.inputs.version }}"/' pyproject.toml
        echo "‚úÖ Version updated in pyproject.toml"
        grep "^version" pyproject.toml
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        echo "üì¶ Installing pip packages for Apple Silicon build..."
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller
        echo "‚úÖ Dependencies installed"
    
    - name: Create macOS icon (.icns)
      run: |
        echo "üé® Creating .icns icon for macOS..."
        mkdir -p app/icon.iconset
        sips -z 16 16 app/ICON.png --out app/icon.iconset/icon_16x16.png
        sips -z 32 32 app/ICON.png --out app/icon.iconset/icon_16x16@2x.png
        sips -z 32 32 app/ICON.png --out app/icon.iconset/icon_32x32.png
        sips -z 64 64 app/ICON.png --out app/icon.iconset/icon_32x32@2x.png
        sips -z 128 128 app/ICON.png --out app/icon.iconset/icon_128x128.png
        sips -z 256 256 app/ICON.png --out app/icon.iconset/icon_128x128@2x.png
        sips -z 256 256 app/ICON.png --out app/icon.iconset/icon_256x256.png
        sips -z 512 512 app/ICON.png --out app/icon.iconset/icon_256x256@2x.png
        sips -z 512 512 app/ICON.png --out app/icon.iconset/icon_512x512.png
        sips -z 1024 1024 app/ICON.png --out app/icon.iconset/icon_512x512@2x.png
        iconutil -c icns app/icon.iconset -o app/icon.icns
        rm -rf app/icon.iconset
        echo "‚úÖ Icon created: app/icon.icns"
    
    - name: Build macOS Apple Silicon app
      run: |
        export MACOSX_DEPLOYMENT_TARGET=11.0
        
        echo "üî® Building Apple Silicon (arm64) app with PyInstaller..."
        echo "üìã Deployment target: macOS 11.0 Big Sur and later (including Sonoma)"
        python -m PyInstaller --name="ArgoLogViewer" \
          --windowed \
          --onedir \
          --icon="app/icon.icns" \
          --add-data="app:app" \
          --hidden-import=PySide6 \
          --hidden-import=paramiko \
          --hidden-import=cryptography \
          --clean \
          --osx-bundle-identifier=com.harshmeetsingh.argologviewer \
          --target-arch arm64 \
          --codesign-identity - \
          app/main.py
        
        echo ""
        echo "üîß Fixing code signatures..."
        
        # Remove all code signatures to prevent Team ID mismatches
        sudo codesign --remove-signature dist/ArgoLogViewer.app/Contents/MacOS/ArgoLogViewer 2>/dev/null || true
        
        # Re-sign with consistent ad-hoc signature
        sudo codesign -s - --deep --force dist/ArgoLogViewer.app
        
        echo "‚úÖ Code signatures fixed"
    
    - name: Verify Apple Silicon binary
      run: |
        echo "üîç Verifying Apple Silicon build..."
        EXECUTABLE="dist/ArgoLogViewer.app/Contents/MacOS/ArgoLogViewer"
        
        if [ ! -f "$EXECUTABLE" ]; then
          echo "‚ùå ERROR: Executable not found"
          exit 1
        fi
        
        lipo -info "$EXECUTABLE"
        
        if lipo -info "$EXECUTABLE" | grep -q "arm64"; then
          echo "‚úÖ SUCCESS: Binary is Apple Silicon arm64!"
          echo "   ‚úì Native support for M1, M2, M3, M4"
          echo "   ‚úì Compatible with macOS 11.0+ (Big Sur, Monterey, Ventura, Sonoma)"
        else
          echo "‚ùå ERROR: Binary is not arm64!"
          exit 1
        fi
    
    - name: Create Apple Silicon DMG
      run: |
        mkdir -p dist/dmg
        cp -r dist/ArgoLogViewer.app dist/dmg/
        ln -s /Applications dist/dmg/Applications
        hdiutil create -volname "Argo Log Viewer (Apple Silicon)" \
          -srcfolder dist/dmg \
          -ov -format UDZO \
          "ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.dmg"
        rm -rf dist/dmg
    
    - name: Zip Apple Silicon .app
      run: |
        cd dist
        zip -r ../ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.zip ArgoLogViewer.app
        cd ..
    
    - name: Generate Apple Silicon checksums
      run: |
        shasum -a 256 ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.dmg > checksums-macos-arm.txt
        shasum -a 256 ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.zip >> checksums-macos-arm.txt
    
    - name: Upload macOS Apple Silicon artifacts
      uses: actions/upload-artifact@v4
      with:
        name: ArgoLogViewer-macOS-AppleSilicon
        path: |
          ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.dmg
          ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.zip
          checksums-macos-arm.txt

  build-linux:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Update version in pyproject.toml
      run: |
        echo "üìù Updating version to ${{ github.event.inputs.version }}"
        sed -i 's/^version = ".*"/version = "${{ github.event.inputs.version }}"/' pyproject.toml
        echo "‚úÖ Version updated in pyproject.toml"
        grep "^version" pyproject.toml
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller
    
    - name: Build Linux binary
      run: |
        pyinstaller --name="ArgoLogViewer" \
          --onefile \
          --add-data="app:app" \
          --hidden-import=PySide6 \
          --hidden-import=paramiko \
          --hidden-import=cryptography \
          --clean \
          app/main.py
    
    - name: Create portable version
      run: |
        mv dist/ArgoLogViewer ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable
        chmod +x ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable
        echo "‚úÖ Portable version created"
    
    - name: Create DEB package structure
      run: |
        VERSION="${{ github.event.inputs.version }}"
        DEBDIR="argologviewer_${VERSION}_amd64"
        
        # Create directory structure
        mkdir -p ${DEBDIR}/DEBIAN
        mkdir -p ${DEBDIR}/usr/local/bin
        mkdir -p ${DEBDIR}/usr/share/applications
        mkdir -p ${DEBDIR}/usr/share/icons/hicolor/256x256/apps
        mkdir -p ${DEBDIR}/usr/share/doc/argologviewer
        
        # Copy binary
        cp ArgoLogViewer-v${VERSION}-Linux-Portable ${DEBDIR}/usr/local/bin/argologviewer
        chmod +x ${DEBDIR}/usr/local/bin/argologviewer
        
        # Create .desktop file
        cat > ${DEBDIR}/usr/share/applications/argologviewer.desktop << 'EOF'
        [Desktop Entry]
        Version=1.0
        Type=Application
        Name=Argo Log Viewer
        Comment=Professional desktop application for viewing Argo Workflow logs
        Exec=/usr/local/bin/argologviewer
        Terminal=false
        Categories=Development;Utility;
        Keywords=argo;kubernetes;logs;ssh;
        EOF
        
        # Copy icon if exists
        if [ -f "app/ICON.png" ]; then
          cp app/ICON.png ${DEBDIR}/usr/share/icons/hicolor/256x256/apps/argologviewer.png
        fi
        
        # Copy documentation
        cp README.md ${DEBDIR}/usr/share/doc/argologviewer/
        cp LICENSE.txt ${DEBDIR}/usr/share/doc/argologviewer/copyright
        
        # Create control file
        cat > ${DEBDIR}/DEBIAN/control << EOF
        Package: argologviewer
        Version: ${VERSION}
        Section: utils
        Priority: optional
        Architecture: amd64
        Maintainer: Harshmeet Singh <harshmeetsingh010@gmail.com>
        Description: Argo Log Viewer
         Professional desktop application for viewing Argo Workflow logs via SSH.
         Features include real-time log streaming, pod search, and Kubernetes operations.
        Homepage: https://github.com/harshmeet-1029/Arog-Log-veiwer
        EOF
        
        # Create postinst script
        cat > ${DEBDIR}/DEBIAN/postinst << 'EOF'
        #!/bin/bash
        set -e
        
        # Update desktop database
        if command -v update-desktop-database > /dev/null 2>&1; then
          update-desktop-database -q
        fi
        
        # Update icon cache
        if command -v gtk-update-icon-cache > /dev/null 2>&1; then
          gtk-update-icon-cache -q -t -f /usr/share/icons/hicolor || true
        fi
        
        echo "Argo Log Viewer installed successfully!"
        echo "Run: argologviewer"
        
        exit 0
        EOF
        
        chmod +x ${DEBDIR}/DEBIAN/postinst
        
        # Create prerm script (uninstaller actions)
        cat > ${DEBDIR}/DEBIAN/prerm << 'EOF'
        #!/bin/bash
        set -e
        
        echo "Removing Argo Log Viewer..."
        
        exit 0
        EOF
        
        chmod +x ${DEBDIR}/DEBIAN/prerm
        
        # Create postrm script (cleanup after uninstall)
        cat > ${DEBDIR}/DEBIAN/postrm << 'EOF'
        #!/bin/bash
        set -e
        
        # Update desktop database
        if command -v update-desktop-database > /dev/null 2>&1; then
          update-desktop-database -q
        fi
        
        # Update icon cache
        if command -v gtk-update-icon-cache > /dev/null 2>&1; then
          gtk-update-icon-cache -q -t -f /usr/share/icons/hicolor || true
        fi
        
        echo "Argo Log Viewer uninstalled successfully!"
        
        exit 0
        EOF
        
        chmod +x ${DEBDIR}/DEBIAN/postrm
        
        echo "‚úÖ DEB package structure created"
    
    - name: Build DEB package
      run: |
        VERSION="${{ github.event.inputs.version }}"
        DEBDIR="argologviewer_${VERSION}_amd64"
        
        dpkg-deb --build ${DEBDIR}
        
        mv ${DEBDIR}.deb ArgoLogViewer-v${VERSION}-Linux-Installer.deb
        
        echo "‚úÖ DEB package built"
        echo "Package info:"
        dpkg-deb --info ArgoLogViewer-v${VERSION}-Linux-Installer.deb
    
    - name: Generate checksums
      run: |
        sha256sum ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable > checksums-linux.txt
        sha256sum ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb >> checksums-linux.txt
        echo "‚úÖ Checksums generated"
    
    - name: Upload Linux artifacts
      uses: actions/upload-artifact@v4
      with:
        name: ArgoLogViewer-Linux
        path: |
          ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable
          ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb
          checksums-linux.txt

  create-release:
    needs: [build-windows, build-macos-arm, build-linux]
    runs-on: ubuntu-latest
    if: github.event.inputs.create_release == 'true'
    
    steps:
    - uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        fetch-depth: 0
    
    - name: Update and commit version
      run: |
        echo "üìù Updating version to ${{ github.event.inputs.version }}"
        sed -i 's/^version = ".*"/version = "${{ github.event.inputs.version }}"/' pyproject.toml
        
        git config user.name "GitHub Actions Bot"
        git config user.email "actions@github.com"
        git add pyproject.toml
        git commit -m "Bump version to ${{ github.event.inputs.version }}" || echo "No changes to commit"
        git push origin main || echo "Nothing to push"
        echo "‚úÖ Version committed and pushed"
    
    - name: Download all artifacts
      uses: actions/download-artifact@v4
    
    - name: Combine checksums
      run: |
        cat ArgoLogViewer-Windows/checksums-windows.txt > CHECKSUMS.txt
        cat ArgoLogViewer-macOS-AppleSilicon/checksums-macos-arm.txt >> CHECKSUMS.txt
        cat ArgoLogViewer-Linux/checksums-linux.txt >> CHECKSUMS.txt
        echo "=== CHECKSUMS ==="
        cat CHECKSUMS.txt
    
    - name: Create GitHub Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v${{ github.event.inputs.version }}
        name: Argo Log Viewer v${{ github.event.inputs.version }}
        body: |
          ## üöÄ Argo Log Viewer v${{ github.event.inputs.version }}
          
          Professional desktop application for viewing Argo Workflow logs via SSH.
          
          ---
          ## üé• THE INSTRUCTION VIDEO IS HERE:
          [https://youtu.be/5N-RW_yY-Q0](https://youtu.be/5N-RW_yY-Q0)
          **NOTE: Appreciate it properly üî™ It took me 3 hours to make this video. Otherwise,Don't forgot I have a knife üî™üòë** 
          ---
          
          ### ‚ö†Ô∏è macOS Users: Security Notice (READ THIS FIRST!)
          
          **macOS will block this app on first launch** because it's not code-signed by Apple. **This is normal and expected.**
          
          ### üîì HOW TO BYPASS (Choose ONE method):
          
          #### ‚≠ê Method 1: System Settings (EASIEST - RECOMMENDED)
          
          **Works on ALL macOS versions (Especially Sequoia 15.x, Sonoma 14.x, Ventura 13.x)**
          
          1. Download DMG ‚Üí Install to Applications
          2. Try to open app (you'll see error) ‚Üí Click "Done"
          3. **System Settings** ‚Üí **Privacy & Security** ‚Üí Scroll to **Security** section
          4. Click **"Open Anyway"** button
          5. Confirm ‚Üí ‚úÖ Done!
          
          #### Method 2: Right-Click (May not work on macOS Sequoia 15.x)
          
          1. Install DMG ‚Üí Right-click app ‚Üí "Open" ‚Üí "Open" again
          
          #### Method 3: Terminal (Advanced)
          
          1. Install DMG or ZIP to Applications
          2. Run: `xattr -cr /Applications/ArgoLogViewer.app`
          3. For macOS Sequoia 15.x, also run:
             ```bash
             sudo codesign --remove-signature /Applications/ArgoLogViewer.app/Contents/MacOS/ArgoLogViewer
             sudo codesign -s - --deep --force /Applications/ArgoLogViewer.app
             ```
          
          **üìñ Detailed guide with screenshots:** [MACOS_INSTALLATION.md](../../blob/main/MACOS_INSTALLATION.md)
          
          ---
          
          ### üì• Downloads
          
          Choose the version for your operating system:
          
          #### ü™ü Windows
          | Type | Download | Size | Description |
          |------|----------|------|-------------|
          | **Installer** (Recommended) | [ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe) | ~50 MB | Full installer with Start Menu, Desktop shortcut, and uninstaller |
          | **Portable** | [ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe) | ~50 MB | Single executable, no installation required |
          
          #### üçé macOS
          **Choose the correct version for your Mac:**
          
          | Mac Type | Download (DMG) | Download (ZIP) |
          |----------|----------------|----------------|
          | üöÄ **Apple Silicon (M1/M2/M3/M4)** | [macOS-AppleSilicon.dmg](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.dmg) | [macOS-AppleSilicon.zip](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.zip) |
          | üíª **Intel Macs** | [macOS-Intel.dmg](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-Intel.dmg) | [macOS-Intel.zip](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-Intel.zip) |
          
          > **Note for Intel Mac users:** Intel builds are uploaded manually after the initial release. If not available yet, please check back shortly or use the Apple Silicon version (works via Rosetta 2).
          
          **Not sure which Mac you have?**
          - Click the Apple menu () ‚Üí "About This Mac"
          - **Intel Macs:** Shows "Processor: Intel Core i5/i7/i9"
          - **Apple Silicon:** Shows "Chip: Apple M1/M2/M3/M4"
          
          #### üêß Linux
          | Type | Download | Size | Description |
          |------|----------|------|-------------|
          | **DEB Package** (Recommended) | [ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb) | ~70 MB | For Debian/Ubuntu - install with dpkg, includes uninstaller |
          | **Portable** | [ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable](../../releases/download/v${{ github.event.inputs.version }}/ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable) | ~70 MB | Single binary, works on all Linux distros |
          
          ---
          
          ### üìã Installation Instructions
          
          #### Windows
          
          **Option 1: Installer (Recommended)**
          1. Download `ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe`
          2. Double-click to run the installer
          3. Follow the installation wizard
          4. App will be added to Start Menu with uninstaller
          5. Windows Defender may warn you - click "More info" ‚Üí "Run anyway"
          
          **To Uninstall:** Go to Settings ‚Üí Apps ‚Üí Argo Log Viewer ‚Üí Uninstall
          
          **Option 2: Portable**
          1. Download `ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe`
          2. Double-click to run (no installation needed)
          3. You can move it anywhere on your system
          
          #### macOS (DMG - Recommended)
          
          **‚ö†Ô∏è IMPORTANT: You MUST follow these steps to bypass macOS Gatekeeper:**
          
          1. Download the correct DMG file for your Mac type (see table above)
          2. Open the DMG file and drag "ArgoLogViewer" to Applications folder
          3. **Do NOT double-click the app yet!**
          4. Try to open the app from Applications (you'll see an error - this is expected)
          5. **Go to System Settings ‚Üí Privacy & Security**
          6. **Scroll down to Security section**
          7. **Click "Open Anyway" button** (appears after step 4)
          8. Confirm by clicking "Open"
          9. ‚úÖ Done! App will now open normally forever
          
          **Alternative:** Right-click the app ‚Üí "Open" ‚Üí "Open" again (may not work on macOS Sequoia 15.x)
          
          #### macOS (ZIP)
          1. Download and unzip the correct ZIP file
          2. Move to Applications folder
          3. Run in Terminal: `xattr -cr /Applications/ArgoLogViewer.app`
          4. Follow steps 4-9 from DMG method above if needed
          
          **üìñ macOS users: See detailed guide with screenshots:** [MACOS_INSTALLATION.md](../../blob/main/MACOS_INSTALLATION.md)
          
          #### Linux
          
          **Option 1: DEB Package (Ubuntu/Debian/Mint - Recommended)**
          1. Download `ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb`
          2. Install: `sudo dpkg -i ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb`
          3. Fix dependencies if needed: `sudo apt-get install -f`
          4. Run: `argologviewer` (from anywhere)
          5. Find in Applications menu
          
          **To Uninstall:** `sudo apt remove argologviewer`
          
          **Option 2: Portable (All Linux distros)**
          1. Download `ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable`
          2. Make executable: `chmod +x ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable`
          3. Run: `./ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable`
          4. Optional: Move to PATH: `sudo mv ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable /usr/local/bin/argologviewer`
          
          ---
          ### ‚úÖ Compatibility
          
          **macOS:**
          - macOS 11.0 Big Sur and later
          - macOS 12.0 Monterey ‚úÖ
          - macOS 13.0 Ventura ‚úÖ
          - macOS 14.0 Sonoma ‚úÖ
          - macOS 15.0 Sequoia ‚úÖ
          - Native support for both Intel and Apple Silicon
          
          **Windows:**
          - Windows 10 and later
          
          **Linux:**
          - Most modern distributions
          
          ### ‚úÖ Verify Download (SHA-256)
          
          See `CHECKSUMS.txt` for SHA-256 hashes to verify your download.
          
          ### üÜï What's New in v${{ github.event.inputs.version }}
          
          - Separate optimized builds for Intel and Apple Silicon Macs
          - Full support for macOS Sonoma
          - Enhanced cross-platform compatibility
          
          ### üêõ Found a Bug?
          
          Report issues at: https://github.com/${{ github.repository }}/issues
          
          ### üìñ Documentation
          
          - [README](../../blob/main/README.md)
          - [Build Instructions](../../blob/main/BUILD.md)
          
          ---
          
          **Built with:** Python, PySide6, PyInstaller
          **License:** See [LICENSE.txt](../../blob/main/LICENSE.txt)
        draft: false
        prerelease: false
        files: |
          ArgoLogViewer-Windows/ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Portable.exe
          ArgoLogViewer-Windows/ArgoLogViewer-v${{ github.event.inputs.version }}-Windows-Installer.exe
          ArgoLogViewer-macOS-AppleSilicon/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.dmg
          ArgoLogViewer-macOS-AppleSilicon/ArgoLogViewer-v${{ github.event.inputs.version }}-macOS-AppleSilicon.zip
          ArgoLogViewer-Linux/ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Portable
          ArgoLogViewer-Linux/ArgoLogViewer-v${{ github.event.inputs.version }}-Linux-Installer.deb
          CHECKSUMS.txt
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
